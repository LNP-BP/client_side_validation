{-
  Id: stl:4dHdHDpB-17hoScv-Z8f00we-UaQ4D@G-tTV1vSN-JseSamU#tennis-peace-olympic
  Name: CommitVerify
  Version: 0.1.0
  Description: Client-side-validation deterministic commitments
  Author: Dr Maxim Orlovsky <orlovsky@lnp-bp.org>
  Copyright (C) 2023-2024 LNP/BP Standards Association. All rights reserved.
  License: Apache-2.0
-}

@context
typelib CommitVerify

import Std#ralph-blue-lucky
  use U5#orbit-graph-sonic


@mnemonic(miami-legacy-empire)
data Commitment        : [Byte ^ 32]

@mnemonic(model-tourist-formal)
data Leaf              : inhabited#16 (protocol ProtocolId, message Message)
                       | entropy (entropy U64, pos U32)

@mnemonic(snake-kitchen-june)
data MerkleBlock       : depth Std.U5
                       , cofactor U16
                       , crossSection [TreeNode ^ 1..0xffffffff]
                       , entropy U64?

@mnemonic(horse-popcorn-bundle)
data MerkleHash        : [Byte ^ 32]

@mnemonic(cadet-guitar-trilogy)
data MerkleNode        : branching NodeBranching
                       , depth U8
                       , width U256
                       , node1 MerkleHash
                       , node2 MerkleHash

@mnemonic(potato-rubber-hobby)
data MerkleProof       : pos U32
                       , cofactor U16
                       , path [MerkleHash ^ ..0x20]

@mnemonic(horizon-pigment-dialog)
data MerkleTree        : depth Std.U5
                       , entropy U64
                       , cofactor U16
                       , messages {ProtocolId -> ^ ..0xffffff Message}
                       , map {U32 -> ^ ..0xffffff ProtocolId, Message}

@mnemonic(druid-blitz-rover)
data Message           : [Byte ^ 32]

@mnemonic(member-dexter-price)
data NodeBranching     : void | single | branch


@mnemonic(shadow-eclipse-program)
data ProtocolId        : [Byte ^ 32]

@mnemonic(origin-roger-relax)
data ReservedBytes1    : [Byte ^ 1]

@mnemonic(florida-libra-circus)
data ReservedBytes2    : [Byte ^ 2]

@mnemonic(young-goblin-academy)
data ReservedBytes4    : [Byte ^ 4]

@mnemonic(pizza-sherman-sound)
data StrictHash        : [Byte ^ 32]

@mnemonic(bahama-toyota-disco)
data TreeNode          : concealedNode (depth Std.U5, hash MerkleHash)
                       | commitmentLeaf (protocolId ProtocolId, message Message)


